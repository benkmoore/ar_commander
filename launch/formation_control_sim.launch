
<launch>
	<!-- Create empty world world -->
	<include file="$(find ar_sim)/launch/world.launch"/>

	<!-- Set enviroment variable to sim -->
	<param name="ENV" value="sim" />

	<!-- Set path to ar repos -->
	<param name="AR_COMMANDER_DIR" value="$(find ar_commander)" />
	<param name="AR_SIM_DIR" value="$(find ar_sim)" />

	<!-- Create Robot 1 -->
	<group ns="robot1">
		 <!-- Set enviroment variable to sim -->
        <param name="ENV" value="sim" />

        <!-- Set path to ar repos -->
        <param name="AR_COMMANDER_DIR" value="$(find ar_commander)" />
        <param name="AR_SIM_DIR" value="$(find ar_sim)" />

		<!-- load params -->
		<rosparam command="load" file="$(find ar_commander)/configs/software_sim_params.yaml"/>
		<rosparam command="load" file="$(find ar_sim)/configs/sim_interface_params.yaml"/>
		<rosparam command="load" file="$(find ar_commander)/configs/hardware_params.yaml"/>

		<!-- Set robot parameters-->
		<arg name="robot_id" value="robot1" />
		<arg name="robot_tf" value="tf_1" />
		<arg name="init_pose" value="-x 0 -y 0 -z 0" />

		<!-- Launch minimial nodes for each robot-->
		<node pkg="ar_commander" type="estimator.py" name="Estimator" output="screen" />
    	<node pkg="ar_commander" type="stateMachine.py" name="StateMachine" output="screen" />

		<!-- Launch gazebo simulator-->
		<include file="$(find ar_sim)/launch/gazebo_sim.launch" >
			<arg name="init_pose" value="$(arg init_pose)" />
			<arg name="robot_id" value="$(arg robot_id)" />
		</include>
    </group>

	<!-- Create robot 2 -->
	<group ns="robot2">
	 	<!-- Set enviroment variable to sim -->
        <param name="ENV" value="sim" />

        <!-- Set path to ar repos -->
        <param name="AR_COMMANDER_DIR" value="$(find ar_commander)" />
        <param name="AR_SIM_DIR" value="$(find ar_sim)" />

		<!-- load params -->
		<rosparam command="load" file="$(find ar_commander)/configs/software_sim_params.yaml"/>
		<rosparam command="load" file="$(find ar_sim)/configs/sim_interface_params.yaml"/>
		<rosparam command="load" file="$(find ar_commander)/configs/hardware_params.yaml"/>

		<!-- Set robot parameters-->
		<arg name="robot_id" value="robot2" />
		<arg name="robot_tf" value="tf_2" />
		<arg name="init_pose" value="-x 2 -y 0 -z 0" />

		<!-- Launch minimial nodes for each robot-->
		<node pkg="ar_commander" type="estimator.py" name="Estimator" output="screen" />
    	<node pkg="ar_commander" type="stateMachine.py" name="StateMachine" output="screen" />

		<!-- Launch gazebo simulator-->
		<include file="$(find ar_sim)/launch/gazebo_sim.launch" >
			<arg name="init_pose" value="$(arg init_pose)" />
			<arg name="robot_id" value="$(arg robot_id)" />
		</include>
	</group>

	<!-- Create Robot 3 -->
	<group ns="robot3">
	 	<!-- Set enviroment variable to sim -->
        <param name="ENV" value="sim" />

        <!-- Set path to ar repos -->
        <param name="AR_COMMANDER_DIR" value="$(find ar_commander)" />
        <param name="AR_SIM_DIR" value="$(find ar_sim)" />

		<!-- load params -->
		<rosparam command="load" file="$(find ar_commander)/configs/software_sim_params.yaml"/>
		<rosparam command="load" file="$(find ar_sim)/configs/sim_interface_params.yaml"/>
		<rosparam command="load" file="$(find ar_commander)/configs/hardware_params.yaml"/>

		<!-- Set robot parameters-->
		<arg name="robot_id" value="robot3" />
		<arg name="robot_tf" value="tf_3" />
		<arg name="init_pose" value="-x 2 -y 2 -z 0" />

		<!-- Launch minimial nodes for each robot-->
		<node pkg="ar_commander" type="estimator.py" name="Estimator" output="screen" />
    	<node pkg="ar_commander" type="stateMachine.py" name="StateMachine" output="screen" />

		<!-- Launch gazebo simulator-->
		<include file="$(find ar_sim)/launch/gazebo_sim.launch" >
			<arg name="init_pose" value="$(arg init_pose)" />
			<arg name="robot_id" value="$(arg robot_id)" />
		</include>
    </group>

	<!-- Create robot 4 -->
	<group ns="robot4">
	 	<!-- Set enviroment variable to sim -->
        <param name="ENV" value="sim" />

        <!-- Set path to ar repos -->
        <param name="AR_COMMANDER_DIR" value="$(find ar_commander)" />
        <param name="AR_SIM_DIR" value="$(find ar_sim)" />

		<!-- load params -->
		<rosparam command="load" file="$(find ar_commander)/configs/software_sim_params.yaml"/>
		<rosparam command="load" file="$(find ar_sim)/configs/sim_interface_params.yaml"/>
		<rosparam command="load" file="$(find ar_commander)/configs/hardware_params.yaml"/>

		<!-- Set robot parameters-->
		<arg name="robot_id" value="robot4" />
		<arg name="robot_tf" value="tf_4" />
		<arg name="init_pose" value="-x 0 -y 2 -z 0" />

		<!-- Launch minimial nodes for each robot-->
		<node pkg="ar_commander" type="estimator.py" name="Estimator" output="screen" />
    	<node pkg="ar_commander" type="stateMachine.py" name="StateMachine" output="screen" />

		<!-- Launch gazebo simulator-->
		<include file="$(find ar_sim)/launch/gazebo_sim.launch" >
			<arg name="init_pose" value="$(arg init_pose)" />
			<arg name="robot_id" value="$(arg robot_id)" />
		</include>
	</group>
</launch>
